// mauIRC - The original mauIRC web frontend
// Copyright (C) 2016 Tulir Asokan
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
@import "../base/vars";

.chat > .message-wrapper {
	box-sizing: border-box;
	width: 100%;
	padding: .25rem .5rem;

	text-align: left;

	&.joined {
		&.next {
			padding-bottom: 0;
		}
		&.prev {
			padding-top: 1px;
		}
	}
	&.own {
		text-align: right;
	}

	> .message {
		position: relative;

		display: inline-block;

		box-sizing: border-box;
		min-width: 20%;
		max-width: 70%;
		padding: .25rem .5rem;

		text-align: left;

		border: 1px solid $green;
		border-radius: .25rem;

		&.own {
			background-color: $extralight-green;
		}

		&.selected {
			background-color: $light-blue;
		}

		&.secondary-action {
			color: $secondary-text-color;
			border: 1px dashed $green;
		}

		&.user-action > .action > .sender {
			color: $text-color;

			&::before {
				content: "â˜… ";
			}
		}

		.action {
			display: inline-block;

			.sender {
				display: inline;

				font-weight: bold;
			}
		}

		.sender {
			font-weight: 600;
		}

		.text {
			display: inline;

			overflow-wrap: break-word;
		}

		.date-wrap {
			display: block;
			float: right;

			margin-left: .25rem;

			.date {
				position: relative;

				display: inline;

				color: $secondary-text-color;

				font-size: .7rem;
			}
		}
	}
}

.chat > .message-wrapper > .message > .preview {
	min-width: 20rem;
	margin-top: .25rem;
	padding: .5rem;

	border-top: 1px solid $secondary-content;

	.text {
		.title {
			display: inline-block;

			font-weight: bold;
		}

		.sitename {
			display: inline-block;

			color: $secondary-text-color;

			&:not(:empty):before {
				content: " - ";
			}
		}

		&:not(.full-size) {
			max-width: calc(100% - 10.5rem);
		}
	}

	.image {
		box-sizing: border-box;
		padding: .25rem;

		@include pointerCursor;

		&.full-size > img {
			max-width: 100%;
			max-height: 100%;
			padding: 0;
		}

		&:not(.full-size) {
			float: right;

			> img {
				max-width: 10rem;
				max-height: 7.5rem;
			}
		}
	}

	&:empty {
		display: none;
	}
}
